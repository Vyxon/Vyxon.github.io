<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>iframe {border: 0;width: 100%;height: 300px;}</style>
</head>
<body>
    <form id="paymentForm">
        <div id="widget"></div>
        <input name="payment_source_token" id="payment_source_token" type="hidden">
    </form>
    <script src="https://app-sandbox.paydock.com/v1/widget.umd.js" ></script>
    <script>
        var widget = new paydock.HtmlWidget('#widget', 'eccb894c4b8a5b7a0a331a7da42cb169cc73bbb4');
        widget.onFinishInsert('input[name="payment_source_token"]', 'payment_source');
        widget.setWebHookDestination("https://webhook.site/24739c92-e85a-4716-8480-2b81060efbbc?");
        widget.setSuccessRedirectUrl('google.com/search?q=success');
        widget.load();

        var myHeaders = new Headers();
        myHeaders.append("x-user-secret-key", "6963a6e97c1d0e522ad5d9c2ddcc52319ffb28dc");
        myHeaders.append("Content-Type", "application/json");

        var raw = JSON.stringify({
          "amount": "17",
          "currency": "AUD",
          "reference": "ch_ref",
          "description": "ch_desc",
          "token" : "a4c1ec67-3b1f-4bf2-8248-c1abba25455b"
        });

        var requestOptions = {
          method: 'POST',
          headers: myHeaders,
          body: raw,
          redirect: 'follow'
        };

        fetch("https://api-sandbox.paydock.com/v1/charges", requestOptions)
          .then(response => response.text())
          .then(result => console.log(result))
          .catch(error => console.log('error', error));
    </script>
</body>
</html>